# 设计模式概述

## 如何学习

发现问题、解决问题、得出结论、产生新知识

让学习更快的方式是尽一切可能让大脑活动起来，特别是开动大脑来完成不同类型的活动

## 为什么需要设计模式

- 设计模式能够有效增强代码的可维护性和可扩展性

- 了解设计模式能够让你在设计层次思考软件

- 设计模式背后象征质量、特性与约束，能够有效降低沟通成本

总之，设计模式的最终目的是建立弹性的设计，可以维护和及时应对变化；

## 设计模式的优缺点

## 设计基本原则

- 发现变化，封装变化

- 面向接口编程，而不是面向实现编程

1. 在类进行依赖注入时，应当将依赖声明为接口类型而不是实现类型，这样一旦依赖的具体实现发生改变，只需通过 setter 重置依赖，而无需修改类的内部代码，符合开闭原则；

- 多使用组合，少用继承

鸭子的行为（飞行与叫喊）通过抽象剥离为接口，然后通过依赖注入方式置入鸭子子类，是的建立起来的鸭子系统非常具备扩展性（弹性），并且其提供的 setter 函数可以在运行时动态改变其行为；

如果使用继承，则失去灵活扩展鸭子子类的行为优势；

## 设计模式学习要点

1.
不要为了使用设计模式而使用，简单的逻辑也许用不到设计模式；

2.
学习设计模式时，要时刻思考模式如何依赖 OO 基础与原则

OO 基础包括：
抽象
    1. 类的抽象
    将对象共同的状态与行为抽象为类
    
    2. 接口（接口、抽象类）的抽象
    将对象共同的信息抽象为接口
    
    注意抽象的层次，同层次的类可以相互组合，实现灵活扩展；更为抽象的类不可依赖于更低抽象层次的类，除非该类未来变化可以很小

封装
    封装的含义可分为以下：
    
    1.  对象的信息隐藏
    类的状态与行为的信息隐藏，类的实现对用户透明，用户只需使用提供的接口满足需求
    
    2. 发现变化，封装变化
    发现类中经常变化的部分，并将其通过接口（广义的接口）抽象出来，通过具体子类去实现变化部分，从而达到封装变化的目的；
    
继承
    1. 对象的状态与行为的共同性
    对象存在相对稳定状态和行为，可以继承父类，实现代码的复用
    
    2. 类的抽象层次决定继承层次
    Java 的类支持多重继承但是不支持多继承，可以通过接口实现多接口实现
    
    注意，使用继承时要确保父类的状态与行为为子类所共有（一般为共性、不易发生改变的代码），否则继承就会给子类带来"噪音信息"，而容易发生改变的需要单独抽离出来通过接口并予以封装，因此一个重要的设计原则就是面向接口而非实现编程；
    
多态
    1. 同样的行为不同的对象表现不同
    多态实现的条件是通过接口（接口与抽象类）、具体类）
    Java 中可以利用重写或重载实现多态

OO 原则包括：

封装变化

多使用组合，少用继承

面向接口而不是实现编程

开闭原则
    对扩展开发，对修改关闭

依赖倒置原则
    要依赖于抽象，不要依赖于具体类
    所谓抽象，即是接口或抽象类，高层组件不应该依赖于底层组件，二者依赖于抽象；
    
    高层组价与低层组件的关系在于，高层组件是由低层组件组合而成去实现完整的功能；
    
   实现依赖倒置的一些方法：
    1. 变量不可持有具体类的引用，将 new 出来的对象改为使用工厂方法创建
    2. 类要从接口中扩展
    3. 不要覆盖基类中已实现的方法

最小知识原则（迪米特法则）
    减少对象之间的交互，只与你最紧密的类通信
    
    实现最小知识原则的一些方法：
    在对象的方法中调用属于以下范围内的方法：
    1. 对象本身的方法
    2. 当做方法参数传递进来的对象的方法
    3. 此方法内部的实例化的对象
    4. 对象的任何组件（属性）
    
单一职责原则
    一个类应该只有一个引起变化的原因
    
设计模式的最终目的是建立弹性的设计，可以维护和及时应对变化；

### 对象之间的关系

继承

组合
    组合相当于每个类都有自己的功能，然后通过一定的方式（依赖注入）进行组合后，实现一个完整的新功能，例如人类和车类的组合实现行驶的功能；
    组合的具体设计模式实现有多种，常见的使用包装模式——装饰器模式、代理模式

委托

